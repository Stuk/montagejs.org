montageDefine("5d55b4c","model/remotemediator",{dependencies:["montage/core/core","montage/core/application"],factory:function(e,a){var t=e("montage/core/core").Montage,i=e("montage/core/application").application,o="gp967ctbkuhh32ztc2knmj9p";a.Remotemediator=t.create(t,{TRAILERS_FEED:{value:"https://gdata.youtube.com/feeds/api/videos?q=%s+official+trailer&max-results=1&v=2&alt=json"},BOXOFFICE_FEED:{value:"http://api.rottentomatoes.com/api/public/v1.0/lists/movies/box_office.json?limit=15&country=us&apikey="+o},UPCOMING_FEED:{value:"http://api.rottentomatoes.com/api/public/v1.0/lists/movies/upcoming.json?page_limit=30&page=1&country=us&apikey="+o},TOPRENTALS_FEED:{value:"http://api.rottentomatoes.com/api/public/v1.0/lists/dvds/top_rentals.json?limit=20&country=us&apikey="+o},INTHEATERS_FEED:{value:"http://api.rottentomatoes.com/api/public/v1.0/lists/movies/in_theaters.json?page_limit=30&page=1&country=us&apikey="+o},load:{value:function(){this.loadLatestBoxofficeMovies(),this.loadUpcomingMovies(),this.loadTopDvdRentals(),this.loadInTheaters()}},jsonpCall:{value:function(e,a){var t="scriptCallback"+a.uuid.replace(/-/g,"_"),i=document.createElement("script");window[t]=function(){delete window[t],i.parentNode&&i.parentNode.removeChild(i),a.apply(this,arguments)},i.type="text/javascript",i.src=e+"&callback="+t,document.head.appendChild(i)}},searchYoutubeTrailer:{value:function(e,a){for(var t,i=e.split(" "),o="",l=0,n=i.length;n>l;l++)t=i[l],0!=l&&(o+="+"),o+=t;var s=this.TRAILERS_FEED.replace("%s",o);this.jsonpCall(s,function(e){a(e.feed.entry[0].media$group.yt$videoid.$t)})}},loadLatestBoxofficeMovies:{value:function(){this.jsonpCall(this.BOXOFFICE_FEED,this.latestBoxofficeMoviesCallback)}},latestBoxofficeMoviesCallback:{value:function(e){var a=e.movies;a?i.dispatchEventNamed("remoteDataReceived",!0,!0,{type:"latestBoxofficeMovies",data:a}):alert("flixter api error, please try again")}},loadUpcomingMovies:{value:function(){this.jsonpCall(this.UPCOMING_FEED,this.upcomingMoviesCallback)}},upcomingMoviesCallback:{value:function(e){var a=e.movies;a?i.dispatchEventNamed("remoteDataReceived",!0,!1,{type:"upcomingMovies",data:a}):alert("flixter api error, please try again")}},loadTopDvdRentals:{value:function(){this.jsonpCall(this.TOPRENTALS_FEED,this.topDvdRentalsCallback)}},topDvdRentalsCallback:{value:function(e){var a=e.movies;a?i.dispatchEventNamed("remoteDataReceived",!0,!1,{type:"topDvdRentals",data:a}):alert("flixter api error, please try again")}},loadInTheaters:{value:function(){this.jsonpCall(this.INTHEATERS_FEED,this.inTheatersCallback)}},inTheatersCallback:{value:function(e){var a=e.movies;a?i.dispatchEventNamed("remoteDataReceived",!0,!1,{type:"inTheaters",data:a}):alert("flixter api error, please try again")}}})}});